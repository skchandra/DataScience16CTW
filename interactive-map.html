<html>
<head>
  <title>Interactive Map</title>
  <style>
    /* For map */
    path {
      stroke: white;
      stroke-width: 0.5px;
      fill: black;
    }
    
    #32 {
      fill: red;
    }
    
    .country {
      fill: #ccc;
      stroke: #fff;
      stroke-width: .5px;
      stroke-linejoin: round;
    }
    
    path[title="Afghanistan"] {
      fill: black;
    }

  </style>
</head>
<body>
  <div class="map"></div>
  <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="http://d3js.org/topojson.v0.min.js"></script>
  <script src="https://d3js.org/d3-queue.v2.min.js"></script>
  <script type="text/javascript">
    var queue = d3_queue.queue;
    var width = 600;
    var height = 500;
    
    var projection = d3.geo.mercator()
      .translate([300, 300])
      .scale(100);

    var path = d3.geo.path()
      .projection(projection);

    var svg = d3.select(".map").append("svg")
      .attr("width", width)
      .attr("height", height)
      .attr("class", "map");
    
    var g = svg.append("g");
    
    /*queue()
      .defer(d3.json, "./data/world-110m2.json")
      .defer(d3.tsv, "./data/world-country-names.tsv")
      .await(ready);*/
    
    queue()
      .defer(d3.json, "https://raw.githubusercontent.com/mbostock/topojson/master/examples/world-110m.json")
      .defer(d3.tsv, "https://raw.githubusercontent.com/KoGor/Maps.GeoInfo/master/world-country-names.tsv")
      .await(ready);
    
    function ready (error, world, names) {
      var countries = topojson.object(world, world.objects.countries).geometries;
      //var neighbors = topojson.neighbors(world, countries);
      var i = -1;
      var n = countries.length;

      countries.forEach(function(d) {
        var filtered = names.filter(function(n) { return d.id == n.id; });
        if (filtered[0] != undefined) {
          d.name = filtered[0].name;
        }
      });
      
      var country = svg.selectAll(".country").data(countries);
      country.enter()
        .insert("path")
        //.append("path")
        .attr("class", "country")
        .attr("title", function(d,i) { return d.name; })
        .attr("d", path);
    }
  </script>
</body>
</html>